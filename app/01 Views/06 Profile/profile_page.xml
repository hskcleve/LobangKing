<Page id="profile_page" loaded="onLoaded" navigatedTo="onNavigatedTo">
    <GridLayout class="gradientBg" rows="auto,auto,*,auto">
        <GridLayout class="topBar" row="0" columns="40,*">
            <Image col="0" src="~/06 Assets/00 General/back_arrow.png" height="20" tap="goBack"/>
            <Label col="1" class="h1" text="Profile" tap="goBack"/>
        </GridLayout>

        <GridLayout class="profileInfoContainer" row="1" columns="*,20,2*" height="25%">
            <StackLayout col="0" height="100%">
                <GridLayout class="profilePicContainer">
                    <Image src="{{user.profile_pic_uri}}"/>
                </GridLayout>
                <Label class="h2-large centered" text="{{user.first_name + ' ' + user.last_name}}"/>
                <Label class="fineprint centered" text="{{'@' + user.user_id}}"/>
            </StackLayout>
            <StackLayout col="2">
                <GridLayout style="padding:10%" rows="auto,auto" columns="*,*,*" height="55%">
                    <Label class="h2-large centered" row="0" col="0" text="{{user.date_joined | displayDateJoined}}"/>
                    <Label class="h2-large centered" row="0" col="1" text="{{user.rating}}"/>
                    <Label class="h2-large centered" row="0" col="2" text="{{user.coins}}"/>
                    <Label class="fineprint centered" row="1" col="0" text="Joined"/>
                    <Label class="fineprint centered" row="1" col="1" text="Rating"/>
                    <Label class="fineprint centered" row="1" col="2" text="Lobang Coins"/>
                </GridLayout>
                <GridLayout columns="*,auto,auto,10,auto,auto,*" height="15%">
                    <Image col="1" height="12" src="{{user.verified | getVerifiedIcon}}" style="margin-bottom:3"/>
                    <Label class="fineprint" col="2" text="{{user.getVerifiedStatusString()}}" style="margin-left:2"/>
                    <Image col="4" height="12" src="~/06 Assets/06 Profile Page Icons/location-pin.png" style="margin-bottom:3"/>
                    <Label class="fineprint" col="5" text="Punggol" style="margin-left:2"/>
                </GridLayout>
            </StackLayout>
        </GridLayout>

        <GridLayout class="profileTabContainer" row="2" rows="60%, *" columns="5,*,5,*,5,*,5">
            <GridLayout row="0" col="1" class="{{tab == 'lobangs' ? 'tabHeaderSelected' : 'tabHeaderUnselected'}}" tap="toggleLobangsTab">
                <Image src="~/06 Assets/06 Profile Page Icons/menu.png" height="35"/>
            </GridLayout>
            <GridLayout row="0" col="3" class="{{tab == 'coins' ? 'tabHeaderSelected' : 'tabHeaderUnselected'}}" tap="toggleCoinsTab">
                <Image src="~/06 Assets/06 Profile Page Icons/coins.png" height="35"/>
            </GridLayout>
            <GridLayout row="0" col="5" class="{{tab == 'edit' ? 'tabHeaderSelected' : 'tabHeaderUnselected'}}" tap="toggleEditTab">
                <Image src="~/06 Assets/06 Profile Page Icons/edit.png" height="42"/>
            </GridLayout>

            
            <ScrollView hidden="{{tab!='lobangs'}}" row="1" colSpan="7" orientation="vertical" scrollBarIndicatorVisible="false">
                <StackLayout style="padding:10%">
                    <Label class="h1" text="Hosted Groupbuys"/>
                    <Repeater items="{{hostedLobangs}}">
                        <Repeater.itemsLayout>
                            <StackLayout orientation="vertical"/>
                        </Repeater.itemsLayout>
                        <Repeater.itemTemplate>
                            <GridLayout class="lobangPanel" rows="*,auto,*,*,*">
                                <Label class="h2" row="0" text="{{lobang_name}}"/>
                                <Label row="1" text="{{joined.length + ' people joined'}}"/>
                                <Label row="2" text="{{products.length + ' products'}}"/>
                                <Label row="3" text="{{getTimeLeft()}}"/>
                                <Label row="4" text="{{getTags()}}"/>
                            </GridLayout>
                        </Repeater.itemTemplate>
                    </Repeater>
                    <Label class="h1" text="Joined Groupbuys"/>
                    <Repeater items="{{joinedLobangs}}">
                        <Repeater.itemsLayout>
                            <StackLayout orientation="vertical"/>
                        </Repeater.itemsLayout>
                        <Repeater.itemTemplate>
                            <GridLayout class="lobangPanel" rows="*,auto,*,*,*">
                                <Label class="h2" row="0" text="{{lobang_name}}"/>
                                <Label row="1" text="{{joined.length + ' people joined'}}"/>
                                <Label row="2" text="{{products.length + ' products'}}"/>
                                <Label row="3" text="{{getTimeLeft()}}"/>
                                <Label row="4" text="{{getTags()}}"/>
                            </GridLayout>
                        </Repeater.itemTemplate>
                    </Repeater>
                </StackLayout>
                
            </ScrollView>
        </GridLayout>
        
    </GridLayout>
</Page>